{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"/media/darcdev/Archivos/Usuario/1-ESTUDIO/UNIVERSIDAD/V SEMESTRE/INGENIERIA DE SOFTWARE I/Proyecto/implementaci\\xF3n/frontend/node_modules/@babel/runtime/regenerator\";\nimport _toConsumableArray from \"/media/darcdev/Archivos/Usuario/1-ESTUDIO/UNIVERSIDAD/V SEMESTRE/INGENIERIA DE SOFTWARE I/Proyecto/implementaci\\xF3n/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _asyncToGenerator from \"/media/darcdev/Archivos/Usuario/1-ESTUDIO/UNIVERSIDAD/V SEMESTRE/INGENIERIA DE SOFTWARE I/Proyecto/implementaci\\xF3n/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"/media/darcdev/Archivos/Usuario/1-ESTUDIO/UNIVERSIDAD/V SEMESTRE/INGENIERIA DE SOFTWARE I/Proyecto/implementaci\\xF3n/frontend/components/Agents.js\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport Agent from \"./Agent\";\nimport axios from \"axios\";\nimport getConfig from \"next/config\";\n\nvar _getConfig = getConfig(),\n    publicConfig = _getConfig.publicRuntimeConfig;\n\nexport default function Agents(_ref) {\n  _s();\n\n  var _this = this;\n\n  var socket = _ref.socket,\n      mtToken = _ref.mtToken;\n\n  var _useState = useState([]),\n      agents = _useState[0],\n      setAgents = _useState[1];\n\n  useEffect(function () {\n    function fetchAgents() {\n      return _fetchAgents.apply(this, arguments);\n    }\n\n    function _fetchAgents() {\n      _fetchAgents = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var _yield$axios$get, savedAgents;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return axios.get(\"\".concat(publicConfig.api_url, \"/api/agents/\").concat(JSON.parse(localStorage.getItem(\"metrictimeUser\")).id));\n\n              case 2:\n                _yield$axios$get = _context.sent;\n                savedAgents = _yield$axios$get.data;\n                setAgents(function (agents) {\n                  return _toConsumableArray(savedAgents);\n                });\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n      return _fetchAgents.apply(this, arguments);\n    }\n\n    fetchAgents();\n    socket.on(\"agent/connected\", function (payload) {\n      if (payload.token !== mtToken) return;\n      var uuid = payload.uuid;\n      var existAgent = agents.find(function (agent) {\n        return agent.uuid === uuid;\n      });\n\n      if (!existAgent) {\n        setAgents(function (agents) {\n          return [payload.agent].concat(_toConsumableArray(agents));\n        });\n      }\n    });\n  }, []);\n\n  var removeAgent = function removeAgent(uuid) {\n    setAgents(function (agents) {\n      return _toConsumableArray(agents.filter(function (agent) {\n        return agent.uuid !== uuid;\n      }));\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-5 gap-x-2 grid-flow-row auto-rows-max \",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-span-5\",\n        children: [agents.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-14 md:p-20 w-full flex flex-col items-center justify-center\\t\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            alt: \"icon disconnected\",\n            className: \"w-16 md:w-18\",\n            src: \"https://img.icons8.com/fluent/96/000000/wi-fi-disconnected.png\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 46,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-center mt-6 font-bold\\ttext-lg\",\n            children: \"No hay agentes conectados\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 51,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-center mt-6 font-bold\\ttext-lg\\t\",\n            children: \"Envie Metricas desde un dispositivo electronico\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 54,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 13\n        }, this), agents.length !== 0 && agents.map(function (agent) {\n          return /*#__PURE__*/_jsxDEV(Agent, {\n            mtToken: mtToken,\n            uuid: agent.uuid,\n            socket: socket,\n            removeAgent: removeAgent\n          }, agent.uuid, false, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 17\n          }, _this);\n        })]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}\n\n_s(Agents, \"+GblVrslcY4TzRx2zoeLk69iwxw=\");\n\n_c = Agents;\n\nvar _c;\n\n$RefreshReg$(_c, \"Agents\");","map":{"version":3,"sources":["/media/darcdev/Archivos/Usuario/1-ESTUDIO/UNIVERSIDAD/V SEMESTRE/INGENIERIA DE SOFTWARE I/Proyecto/implementaciÃ³n/frontend/components/Agents.js"],"names":["useEffect","useState","Agent","axios","getConfig","publicConfig","publicRuntimeConfig","Agents","socket","mtToken","agents","setAgents","fetchAgents","get","api_url","JSON","parse","localStorage","getItem","id","savedAgents","data","on","payload","token","uuid","existAgent","find","agent","removeAgent","filter","length","map"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\nimport Agent from \"./Agent\";\nimport axios from \"axios\";\nimport getConfig from \"next/config\";\n\nconst { publicRuntimeConfig: publicConfig } = getConfig();\n\nexport default function Agents({ socket, mtToken }) {\n  const [agents, setAgents] = useState([]);\n\n  useEffect(() => {\n    async function fetchAgents() {\n      const { data: savedAgents } = await axios.get(\n        `${publicConfig.api_url}/api/agents/${\n          JSON.parse(localStorage.getItem(\"metrictimeUser\")).id\n        }`\n      );\n      setAgents((agents) => [...savedAgents]);\n    }\n\n    fetchAgents();\n\n    socket.on(\"agent/connected\", (payload) => {\n      if (payload.token !== mtToken) return;\n      const { uuid } = payload;\n      const existAgent = agents.find((agent) => agent.uuid === uuid);\n      if (!existAgent) {\n        setAgents((agents) => [payload.agent, ...agents]);\n      }\n    });\n  }, []);\n\n  const removeAgent = (uuid) => {\n    setAgents((agents) => [\n      ...agents.filter((agent) => {\n        return agent.uuid !== uuid;\n      }),\n    ]);\n  };\n  return (\n    <>\n      <div className=\"grid grid-cols-5 gap-x-2 grid-flow-row auto-rows-max \">\n        <div className=\"col-span-5\">\n          {agents.length === 0 && (\n            <div className=\"p-14 md:p-20 w-full flex flex-col items-center justify-center\t\">\n              <img\n                alt=\"icon disconnected\"\n                className=\"w-16 md:w-18\"\n                src=\"https://img.icons8.com/fluent/96/000000/wi-fi-disconnected.png\"\n              />\n              <p className=\"text-center mt-6 font-bold\ttext-lg\">\n                No hay agentes conectados\n              </p>\n              <p className=\"text-center mt-6 font-bold\ttext-lg\t\">\n                Envie Metricas desde un dispositivo electronico\n              </p>\n            </div>\n          )}\n          {agents.length !== 0 &&\n            agents.map((agent) => {\n              return (\n                <Agent\n                  mtToken={mtToken}\n                  key={agent.uuid}\n                  uuid={agent.uuid}\n                  socket={socket}\n                  removeAgent={removeAgent}\n                />\n              );\n            })}\n        </div>\n      </div>\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}